<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Energía Eléctrica</title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        .title {
            font-size: 28px;
            font-weight: bold;
            color: #333;
            margin-right: 20px;
            min-width: 200px;
        }
        .accordion {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            overflow: hidden;
        }
        .accordion-header {
            padding: 15px;
            background-color: #f0f0f0;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #ddd;
        }
        .accordion-header:hover {
            background-color: #e0e0e0;
        }
        .accordion-content {
            padding: 15px;
            display: none;
        }
        .chart-wrapper {
            width: 100%;
            height: 400px;
        }
        .accordion-icon {
            transition: transform 0.3s ease;
        }
        .accordion.active .accordion-icon {
            transform: rotate(180deg);
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="title">Energía Eléctrica</div>
    </div>
    
    <!-- Gráfica 1 -->
    <div class="accordion" id="accordion1">
        <div class="accordion-header">
            <span>Capacidad Instalada por Tecnología (MW)</span>
            <span class="accordion-icon">▼</span>
        </div>
        <div class="accordion-content">
            <div id="chart1" class="chart-wrapper"></div>
        </div>
    </div>
    
    <!-- Gráfica 2 -->
    <div class="accordion" id="accordion2">
        <div class="accordion-header">
            <span>Precio Bolsa vs Precio de Escasez</span>
            <span class="accordion-icon">▼</span>
        </div>
        <div class="accordion-content">
            <div id="chart2" class="chart-wrapper"></div>
        </div>
    </div>
    
    <!-- Gráfica 3 -->
    <div class="accordion" id="accordion3">
        <div class="accordion-header">
            <span>Porcentaje de Nivel de Embalse y Aportes</span>
            <span class="accordion-icon">▼</span>
        </div>
        <div class="accordion-content">
            <div id="chart3" class="chart-wrapper"></div>
        </div>
    </div>

    <script>
        // Función para manejar el acordeón
        function setupAccordion() {
            const accordions = document.querySelectorAll('.accordion');
            
            accordions.forEach(accordion => {
                const header = accordion.querySelector('.accordion-header');
                
                header.addEventListener('click', () => {
                    accordion.classList.toggle('active');
                    const content = accordion.querySelector('.accordion-content');
                    
                    if (content.style.display === 'block') {
                        content.style.display = 'none';
                    } else {
                        content.style.display = 'block';
                    }
                });
            });
            
            // Abrir el primer acordeón por defecto
            if (accordions.length > 0) {
                accordions[0].classList.add('active');
                accordions[0].querySelector('.accordion-content').style.display = 'block';
            }
        }
        
        // Llamar a la función cuando el DOM esté cargado
        document.addEventListener('DOMContentLoaded', function() {
            setupAccordion();
            
            // Gráfica 1 - Capacidad Instalada por Tecnología (MW)
            Highcharts.chart('chart1', {
                chart: {
                    type: 'column',
                    backgroundColor: '#F6F6F5'
                },
                title: {
                    text: null
                },
                xAxis: {
                    categories: ['2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023', '2024', '2025'],
                    labels: {
                        style: {
                            fontSize: '14px'
                        }
                    }
                },
                yAxis: {
                    min: 0,
                    max: 25,
                    title: {
                        text: 'Capacidad Instalada (GW)',
                        style: {
                            fontWeight: 'bold',
                            fontSize: '14px'
                        }
                    },
                    gridLineDashStyle: 'Dash'
                },
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom',
                    floating: false,
                    backgroundColor: null
                },
                tooltip: {
                    shared: true
                },
                plotOptions: {
                    column: {
                        stacking: 'normal'
                    }
                },
                series: [
                    { name: 'ACPM', data: [0.790, 0.774, 0.774, 0.774, 0.766, 0.766, 0.807, 0.807, 0.823, 0.903, 0.903, 0.903], color: '#b8ff65' },
                    { name: 'AGUA', data: [10.315, 10.892, 10.943, 10.943, 10.974, 11.041, 11.043, 11.043, 11.619, 12.237, 12.237, 12.237], color: '#2b4037' },
                    { name: 'CARBON', data: [1.003, 1.339, 1.329, 1.329, 1.612, 1.619, 1.623, 1.626, 1.632, 1.634, 1.613, 1.613], color: '#05D80A' },
                    { name: 'COMBUSTOLEO', data: [0.187, 0.187, 0.187, 0.187, 0.272, 0.272, 0.272, 0.268, 0.268, 0.266, 0.266, 0.266], color: '#e4b33c' },
                    { name: 'GAS', data: [2.3959, 2.3969, 2.4119, 2.4129, 2.4279, 2.4209, 2.3760, 2.5500, 2.7420, 2.9830, 2.9830, 2.9830], color: '#4f8a21' },
                    { name: 'GLP', data: [0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.052, 0.052], color: '#f2df96' },
                    { name: 'JET-A1', data: [0.046, 0.046, 0.046, 0.046, 0.044, 0.044, 0.044, 0.044, 0.051, 0.050, 0.050, 0.050], color: '#e9ffc7' },
                    { name: 'RAD SOLAR', data: [0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 1.138, 1.138], color: '#f97316' }
                ],
                annotations: [{
                    labels: [{
                        point: {
                            x: 2,
                            y: 20,
                            xAxis: 0,
                            yAxis: 0
                        },
                        text: 'CAPACIDAD EFECTIVA NETA: 22.120 GW',
                        style: {
                            fontSize: '14px',
                            fontWeight: 'bold'
                        }
                    }]
                }]
            });

            // Gráfica 2 - Precio Marginal de Escasez
            Highcharts.chart('chart2', {
                chart: {
                    backgroundColor: '#F6F6F5',
                    zooming: {
                        type: 'xy'
                    }
                },
                title: {
                    text: null,
                    style: {
                        fontSize: '28px',
                        fontWeight: 'bold'
                    }
                },
                xAxis: {
                    type: 'datetime',
                    dateTimeLabelFormats: {
                        month: '%Y-%m'
                    },
                    gridLineWidth: 1,
                    gridLineDashStyle: 'Dash',
                    gridLineColor: 'rgba(0,0,0,0.1)',
                    labels: {
                        style: {
                            fontSize: '14px'
                        }
                    }
                },
                yAxis: {
                    title: {
                        text: 'COP/kWh',
                        style: {
                            fontSize: '13px',
                            fontWeight: 'bold'
                        }
                    },
                    gridLineWidth: 1,
                    gridLineDashStyle: 'Dash',
                    gridLineColor: 'rgba(0,0,0,0.1)',
                    labels: {
                        style: {
                            fontSize: '14px'
                        },
                        formatter: function() {
                            return Highcharts.numberFormat(this.value, 0);
                        }
                    }
                },
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom',
                    itemStyle: {
                        fontSize: '16px'
                    },
                    backgroundColor: null,
                    borderWidth: 0
                },
                plotOptions: {
                    series: {
                        marker: {
                            enabled: false
                        },
                        lineWidth: 2
                    }
                },
                series: [{
                    name: 'Precio Bolsa Diario TX1',
                    color: '#05D80A',
                    data: [
                        [Date.UTC(2024, 10, 2), 2452.071534],
                        [Date.UTC(2024, 10, 3), 2459.510000],
                        [Date.UTC(2024, 10, 4), 2366.252917],
                        [Date.UTC(2024, 10, 5), 1544.381989],
                        [Date.UTC(2024, 10, 6), 1844.405303],
                        [Date.UTC(2024, 10, 7), 1894.955547],
                        [Date.UTC(2024, 10, 8), 1546.800940],
                        [Date.UTC(2024, 10, 9), 782.158353],
                        [Date.UTC(2024, 10, 10), 824.784251],
                        [Date.UTC(2024, 10, 11), 808.784736],
                        [Date.UTC(2024, 10, 12), 979.651726],
                        [Date.UTC(2024, 10, 13), 819.391944],
                        [Date.UTC(2024, 10, 14), 929.617482],
                        [Date.UTC(2024, 10, 15), 658.707410],
                        [Date.UTC(2024, 10, 16), 640.152199],
                        [Date.UTC(2024, 10, 17), 516.445807],
                        [Date.UTC(2024, 10, 18), 682.535204],
                        [Date.UTC(2024, 10, 19), 689.603710],
                        [Date.UTC(2024, 10, 20), 767.911550],
                        [Date.UTC(2024, 10, 21), 555.349774],
                        [Date.UTC(2024, 10, 22), 677.045122],
                        [Date.UTC(2024, 10, 23), 558.749182],
                        [Date.UTC(2024, 10, 24), 233.387239],
                        [Date.UTC(2024, 10, 25), 480.673277],
                        [Date.UTC(2024, 10, 26), 460.195981],
                        [Date.UTC(2024, 10, 27), 763.070180],
                        [Date.UTC(2024, 10, 28), 796.797035],
                        [Date.UTC(2024, 10, 29), 580.164276],
                        [Date.UTC(2024, 10, 30), 433.017808],
                        [Date.UTC(2024, 11, 1), 545.158556],
                        [Date.UTC(2024, 11, 2), 652.288041],
                        [Date.UTC(2024, 11, 3), 724.485892],
                        [Date.UTC(2024, 11, 4), 774.267744],
                        [Date.UTC(2024, 11, 5), 790.051037],
                        [Date.UTC(2024, 11, 6), 778.122899],
                        [Date.UTC(2024, 11, 7), 801.955765],
                        [Date.UTC(2024, 11, 8), 705.242958],
                        [Date.UTC(2024, 11, 9), 842.348795],
                        [Date.UTC(2024, 11, 10), 860.213171],
                        [Date.UTC(2024, 11, 11), 870.476921],
                        [Date.UTC(2024, 11, 12), 886.039751],
                        [Date.UTC(2024, 11, 13), 939.337641],
                        [Date.UTC(2024, 11, 14), 1003.607850],
                        [Date.UTC(2024, 11, 15), 930.736655],
                        [Date.UTC(2024, 11, 16), 1081.873287],
                        [Date.UTC(2024, 11, 17), 1069.018625],
                        [Date.UTC(2024, 11, 18), 962.536485],
                        [Date.UTC(2024, 11, 19), 880.181077],
                        [Date.UTC(2024, 11, 20), 932.097551],
                        [Date.UTC(2024, 11, 21), 957.330925],
                        [Date.UTC(2024, 11, 22), 868.808940],
                        [Date.UTC(2024, 11, 23), 711.787267],
                        [Date.UTC(2024, 11, 24), 707.751418],
                        [Date.UTC(2024, 11, 25), 391.211957],
                        [Date.UTC(2024, 11, 26), 517.439465],
                        [Date.UTC(2024, 11, 27), 378.446612],
                        [Date.UTC(2024, 11, 28), 493.658406],
                        [Date.UTC(2024, 11, 29), 294.068472],
                        [Date.UTC(2024, 11, 30), 380.341193],
                        [Date.UTC(2024, 11, 31), 156.690945],
                        [Date.UTC(2025, 0, 2), 468.178628],
                        [Date.UTC(2025, 0, 3), 508.065125],
                        [Date.UTC(2025, 0, 4), 392.878883],
                        [Date.UTC(2025, 0, 5), 176.239947],
                        [Date.UTC(2025, 0, 6), 312.535654],
                        [Date.UTC(2025, 0, 7), 344.705032],
                        [Date.UTC(2025, 0, 8), 237.919423],
                        [Date.UTC(2025, 0, 9), 223.016902],
                        [Date.UTC(2025, 0, 10), 221.358689],
                        [Date.UTC(2025, 0, 11), 270.199250],
                        [Date.UTC(2025, 0, 12), 297.414334],
                        [Date.UTC(2025, 0, 13), 379.195779],
                        [Date.UTC(2025, 0, 14), 444.583363],
                        [Date.UTC(2025, 0, 15), 549.227566],
                        [Date.UTC(2025, 0, 16), 597.708333],
                        [Date.UTC(2025, 0, 17), 686.300333],
                        [Date.UTC(2025, 0, 18), 661.792792],
                        [Date.UTC(2025, 0, 19), 630.591667],
                        [Date.UTC(2025, 0, 20), 656.281417],
                        [Date.UTC(2025, 0, 21), 675.034042],
                        [Date.UTC(2025, 0, 22), 700.638278],
                        [Date.UTC(2025, 0, 23), 737.373779],
                        [Date.UTC(2025, 0, 24), 691.671949],
                        [Date.UTC(2025, 0, 25), 721.750737],
                        [Date.UTC(2025, 0, 26), 756.347820],
                        [Date.UTC(2025, 0, 27), 727.842806],
                        [Date.UTC(2025, 0, 28), 733.041670],
                        [Date.UTC(2025, 0, 29), 757.393945],
                        [Date.UTC(2025, 0, 30), 699.237164],
                        [Date.UTC(2025, 0, 31), 633.691331],
                        [Date.UTC(2025, 1, 1), 614.003690],
                        [Date.UTC(2025, 1, 2), 489.144146],
                        [Date.UTC(2025, 1, 3), 643.460900],
                        [Date.UTC(2025, 1, 4), 671.528645],
                        [Date.UTC(2025, 1, 5), 699.890519],
                        [Date.UTC(2025, 1, 6), 729.554341],
                        [Date.UTC(2025, 1, 7), 632.278358],
                        [Date.UTC(2025, 1, 8), 486.127395],
                        [Date.UTC(2025, 1, 9), 617.170940],
                        [Date.UTC(2025, 1, 10), 586.180540],
                        [Date.UTC(2025, 1, 11), 410.314313],
                        [Date.UTC(2025, 1, 12), 617.189764],
                        [Date.UTC(2025, 1, 13), 543.740188],
                        [Date.UTC(2025, 1, 14), 449.492077],
                        [Date.UTC(2025, 1, 15), 434.892729],
                        [Date.UTC(2025, 1, 16), 340.704215],
                        [Date.UTC(2025, 1, 17), 309.646319],
                        [Date.UTC(2025, 1, 18), 261.308865],
                        [Date.UTC(2025, 1, 19), 227.806306],
                        [Date.UTC(2025, 1, 20), 251.220145],
                        [Date.UTC(2025, 1, 21), 203.260287],
                        [Date.UTC(2025, 1, 22), 193.300071],
                        [Date.UTC(2025, 1, 23), 185.615207],
                        [Date.UTC(2025, 1, 24), 259.991926],
                        [Date.UTC(2025, 1, 25), 297.027840],
                        [Date.UTC(2025, 1, 26), 259.229064],
                        [Date.UTC(2025, 1, 27), 228.592488],
                        [Date.UTC(2025, 1, 28), 232.701226],
                        [Date.UTC(2025, 2, 1), 163.101867],
                        [Date.UTC(2025, 2, 2), 145.404298],
                        [Date.UTC(2025, 2, 3), 207.640429],
                        [Date.UTC(2025, 2, 4), 253.354906],
                        [Date.UTC(2025, 2, 5), 217.768453],
                        [Date.UTC(2025, 2, 6), 219.251496],
                        [Date.UTC(2025, 2, 7), 178.633581],
                        [Date.UTC(2025, 2, 8), 178.642042],
                        [Date.UTC(2025, 2, 9), 174.065606],
                        [Date.UTC(2025, 2, 10), 233.365579],
                        [Date.UTC(2025, 2, 11), 279.777692],
                        [Date.UTC(2025, 2, 12), 270.881183],
                        [Date.UTC(2025, 2, 13), 244.096717],
                        [Date.UTC(2025, 2, 14), 243.554721],
                        [Date.UTC(2025, 2, 15), 245.429594],
                        [Date.UTC(2025, 2, 16), 233.473871],
                        [Date.UTC(2025, 2, 17), 250.338456],
                        [Date.UTC(2025, 2, 18), 230.302343],
                        [Date.UTC(2025, 2, 19), 249.039907],
                        [Date.UTC(2025, 2, 20), 263.304875],
                        [Date.UTC(2025, 2, 21), 220.465673],
                        [Date.UTC(2025, 2, 22), 200.888474],
                        [Date.UTC(2025, 2, 23), 153.689549],
                        [Date.UTC(2025, 2, 24), 189.883432]
                    ]
                }, {
                    name: 'Precio Marginal de Escasez',
                    color: '#e4b33c',
                    data: [
                        [Date.UTC(2024, 10, 2), 936.05983],
                        [Date.UTC(2024, 10, 3), 936.05983],
                        [Date.UTC(2024, 10, 4), 936.05983],
                        [Date.UTC(2024, 10, 5), 936.05983],
                        [Date.UTC(2024, 10, 6), 936.05983],
                        [Date.UTC(2024, 10, 7), 936.05983],
                        [Date.UTC(2024, 10, 8), 936.05983],
                        [Date.UTC(2024, 10, 9), 936.05983],
                        [Date.UTC(2024, 10, 10), 936.05983],
                        [Date.UTC(2024, 10, 11), 936.05983],
                        [Date.UTC(2024, 10, 12), 936.05983],
                        [Date.UTC(2024, 10, 13), 936.05983],
                        [Date.UTC(2024, 10, 14), 936.05983],
                        [Date.UTC(2024, 10, 15), 936.05983],
                        [Date.UTC(2024, 10, 16), 936.05983],
                        [Date.UTC(2024, 10, 17), 936.05983],
                        [Date.UTC(2024, 10, 18), 936.05983],
                        [Date.UTC(2024, 10, 19), 936.05983],
                        [Date.UTC(2024, 10, 20), 936.05983],
                        [Date.UTC(2024, 10, 21), 936.05983],
                        [Date.UTC(2024, 10, 22), 936.05983],
                        [Date.UTC(2024, 10, 23), 936.05983],
                        [Date.UTC(2024, 10, 24), 936.05983],
                        [Date.UTC(2024, 10, 25), 936.05983],
                        [Date.UTC(2024, 10, 26), 936.05983],
                        [Date.UTC(2024, 10, 27), 936.05983],
                        [Date.UTC(2024, 10, 28), 936.05983],
                        [Date.UTC(2024, 10, 29), 936.05983],
                        [Date.UTC(2024, 10, 30), 936.05983],
                        [Date.UTC(2024, 11, 1), 948.84506],
                        [Date.UTC(2024, 11, 2), 948.84506],
                        [Date.UTC(2024, 11, 3), 948.84506],
                        [Date.UTC(2024, 11, 4), 948.84506],
                        [Date.UTC(2024, 11, 5), 948.84506],
                        [Date.UTC(2024, 11, 6), 948.84506],
                        [Date.UTC(2024, 11, 7), 948.84506],
                        [Date.UTC(2024, 11, 8), 948.84506],
                        [Date.UTC(2024, 11, 9), 948.84506],
                        [Date.UTC(2024, 11, 10), 948.84506],
                        [Date.UTC(2024, 11, 11), 948.84506],
                        [Date.UTC(2024, 11, 12), 948.84506],
                        [Date.UTC(2024, 11, 13), 948.84506],
                        [Date.UTC(2024, 11, 14), 948.84506],
                        [Date.UTC(2024, 11, 15), 948.84506],
                        [Date.UTC(2024, 11, 16), 948.84506],
                        [Date.UTC(2024, 11, 17), 948.84506],
                        [Date.UTC(2024, 11, 18), 948.84506],
                        [Date.UTC(2024, 11, 19), 948.84506],
                        [Date.UTC(2024, 11, 20), 948.84506],
                        [Date.UTC(2024, 11, 21), 948.84506],
                        [Date.UTC(2024, 11, 22), 948.84506],
                        [Date.UTC(2024, 11, 23), 948.84506],
                        [Date.UTC(2024, 11, 24), 948.84506],
                        [Date.UTC(2024, 11, 25), 948.84506],
                        [Date.UTC(2024, 11, 26), 948.84506],
                        [Date.UTC(2024, 11, 27), 948.84506],
                        [Date.UTC(2024, 11, 28), 948.84506],
                        [Date.UTC(2024, 11, 29), 948.84506],
                        [Date.UTC(2024, 11, 30), 948.84506],
                        [Date.UTC(2024, 11, 31), 948.84506],
                        [Date.UTC(2025, 0, 2), 951.76223],
                        [Date.UTC(2025, 0, 3), 951.76223],
                        [Date.UTC(2025, 0, 4), 951.76223],
                        [Date.UTC(2025, 0, 5), 951.76223],
                        [Date.UTC(2025, 0, 6), 951.76223],
                        [Date.UTC(2025, 0, 7), 951.76223],
                        [Date.UTC(2025, 0, 8), 951.76223],
                        [Date.UTC(2025, 0, 9), 951.76223],
                        [Date.UTC(2025, 0, 10), 951.76223],
                        [Date.UTC(2025, 0, 11), 951.76223],
                        [Date.UTC(2025, 0, 12), 951.76223],
                        [Date.UTC(2025, 0, 13), 951.76223],
                        [Date.UTC(2025, 0, 14), 951.76223],
                        [Date.UTC(2025, 0, 15), 951.76223],
                        [Date.UTC(2025, 0, 16), 951.76223],
                        [Date.UTC(2025, 0, 17), 951.76223],
                        [Date.UTC(2025, 0, 18), 951.76223],
                        [Date.UTC(2025, 0, 19), 951.76223],
                        [Date.UTC(2025, 0, 20), 951.76223],
                        [Date.UTC(2025, 0, 21), 951.76223],
                        [Date.UTC(2025, 0, 22), 951.76223],
                        [Date.UTC(2025, 0, 23), 951.76223],
                        [Date.UTC(2025, 0, 24), 951.76223],
                        [Date.UTC(2025, 0, 25), 951.76223],
                        [Date.UTC(2025, 0, 26), 951.76223],
                        [Date.UTC(2025, 0, 27), 951.76223],
                        [Date.UTC(2025, 0, 28), 951.76223],
                        [Date.UTC(2025, 0, 29), 951.76223],
                        [Date.UTC(2025, 0, 30), 951.76223],
                        [Date.UTC(2025, 0, 31), 951.76223],
                        [Date.UTC(2025, 1, 1), 970.59124],
                        [Date.UTC(2025, 1, 2), 970.59124],
                        [Date.UTC(2025, 1, 3), 970.59124],
                        [Date.UTC(2025, 1, 4), 970.59124],
                        [Date.UTC(2025, 1, 5), 970.59124],
                        [Date.UTC(2025, 1, 6), 970.59124],
                        [Date.UTC(2025, 1, 7), 970.59124],
                        [Date.UTC(2025, 1, 8), 970.59124],
                        [Date.UTC(2025, 1, 9), 970.59124],
                        [Date.UTC(2025, 1, 10), 970.59124],
                        [Date.UTC(2025, 1, 11), 970.59124],
                        [Date.UTC(2025, 1, 12), 970.59124],
                        [Date.UTC(2025, 1, 13), 970.59124],
                        [Date.UTC(2025, 1, 14), 970.59124],
                        [Date.UTC(2025, 1, 15), 970.59124],
                        [Date.UTC(2025, 1, 16), 970.59124],
                        [Date.UTC(2025, 1, 17), 970.59124],
                        [Date.UTC(2025, 1, 18), 970.59124],
                        [Date.UTC(2025, 1, 19), 970.59124],
                        [Date.UTC(2025, 1, 20), 970.59124],
                        [Date.UTC(2025, 1, 21), 970.59124],
                        [Date.UTC(2025, 1, 22), 970.59124],
                        [Date.UTC(2025, 1, 23), 970.59124],
                        [Date.UTC(2025, 1, 24), 970.59124],
                        [Date.UTC(2025, 1, 25), 970.59124],
                        [Date.UTC(2025, 1, 26), 970.59124],
                        [Date.UTC(2025, 1, 27), 970.59124],
                        [Date.UTC(2025, 1, 28), 970.59124],
                        [Date.UTC(2025, 2, 1), 937.30314],
                        [Date.UTC(2025, 2, 2), 937.30314],
                        [Date.UTC(2025, 2, 3), 937.30314],
                        [Date.UTC(2025, 2, 4), 937.30314],
                        [Date.UTC(2025, 2, 5), 937.30314],
                        [Date.UTC(2025, 2, 6), 937.30314],
                        [Date.UTC(2025, 2, 7), 937.30314],
                        [Date.UTC(2025, 2, 8), 937.30314],
                        [Date.UTC(2025, 2, 9), 937.30314],
                        [Date.UTC(2025, 2, 10), 937.30314],
                        [Date.UTC(2025, 2, 11), 937.30314],
                        [Date.UTC(2025, 2, 12), 937.30314],
                        [Date.UTC(2025, 2, 13), 937.30314],
                        [Date.UTC(2025, 2, 14), 937.30314],
                        [Date.UTC(2025, 2, 15), 937.30314],
                        [Date.UTC(2025, 2, 16), 937.30314],
                        [Date.UTC(2025, 2, 17), 937.30314],
                        [Date.UTC(2025, 2, 18), 937.30314],
                        [Date.UTC(2025, 2, 19), 937.30314],
                        [Date.UTC(2025, 2, 20), 937.30314],
                        [Date.UTC(2025, 2, 21), 937.30314],
                        [Date.UTC(2025, 2, 22), 937.30314],
                        [Date.UTC(2025, 2, 23), 937.30314],
                        [Date.UTC(2025, 2, 24), 937.30314]
                    ]
                }],
                credits: {
                    enabled: false
                }
            });

            // Función para procesar el CSV de la gráfica 3
            function parseCSV(csv) {
                const lines = csv.split('\n');
                const headers = lines[0].split(',').map(h => h.trim());
                
                const requiredHeaders = ['Date', 'aportes', 'volumen_util', 'porcentaje_util'];
                if (!requiredHeaders.every(h => headers.includes(h))) {
                    throw new Error('El archivo CSV no tiene el formato esperado');
                }

                const data = [];
                
                for (let i = 1; i < lines.length; i++) {
                    if (lines[i].trim() === '') continue;
                    
                    const values = lines[i].split(',');
                    if (values.length === headers.length) {
                        const dateParts = values[0].trim().split('-');
                        const date = Date.UTC(
                            parseInt(dateParts[0]), 
                            parseInt(dateParts[1]) - 1, 
                            parseInt(dateParts[2])
                        );
                        
                        data.push({
                            date: date,
                            aportes: parseFloat(values[1]),
                            porcentaje_util: parseFloat(values[3])
                        });
                    }
                }
                
                return data;
            }

            // Función para crear la gráfica 3
            function createChart3(data) {
                try {
                    Highcharts.chart('chart3', {
                        chart: {
                            zoomType: 'xy',
                            backgroundColor: '#F6F6F5'
                        },
                        title: {
                            text: null,
                            style: {
                                fontSize: '24px',
                                fontWeight: 'bold'
                            }
                        },
                        xAxis: {
                            type: 'datetime',
                            dateTimeLabelFormats: {
                                day: '%e %b %Y',
                                month: '%b %Y',
                                year: '%Y'
                            },
                            title: {
                                text: null
                            },
                            gridLineWidth: 1,
                            gridLineDashStyle: 'Dash',
                            labels: {
                                style: {
                                    fontSize: '12px'
                                }
                            }
                        },
                        yAxis: [{
                            title: {
                                text: 'GWh-Día',
                                style: {
                                    fontSize: '16px',
                                    fontWeight: 'bold',
                                    color: '#4f8a21'
                                }
                            },
                            min: 0,
                            max: 700,
                            gridLineDashStyle: 'Dash',
                            labels: {
                                format: '{value:.1f}',
                                style: {
                                    fontSize: '12px',
                                    color: '#4f8a21'
                                }
                            },
                            opposite: false
                        }, {
                            title: {
                                text: '% Volumen Util Embalse',
                                style: {
                                    fontSize: '16px',
                                    fontWeight: 'bold',
                                    color: '#2b4037'
                                }
                            },
                            min: 0,
                            max: 1,
                            labels: {
                                format: '{value:.2f}',
                                style: {
                                    fontSize: '12px',
                                    color: '#2b4037'
                                }
                            },
                            opposite: true
                        }],
                        tooltip: {
                            shared: true,
                            xDateFormat: '%Y-%m-%d',
                            valueDecimals: 2
                        },
                        legend: {
                            layout: 'horizontal',
                            align: 'center',
                            verticalAlign: 'bottom',
                            backgroundColor: null,
                            borderWidth: 0,
                            itemStyle: {
                                fontSize: '14px'
                            }
                        },
                        plotOptions: {
                            series: {
                                marker: {
                                    enabled: false
                                },
                                states: {
                                    hover: {
                                        enabled: true,
                                        lineWidth: 2
                                    }
                                }
                            },
                            area: {
                                fillOpacity: 0.4
                            }
                        },
                        series: [{
                            name: 'Aportes',
                            type: 'line',
                            yAxis: 0,
                            color: '#4f8a21',
                            lineWidth: 2,
                            tooltip: {
                                valueSuffix: ' GWh-Día'
                            },
                            data: data.map(item => [item.date, item.aportes])
                        }, {
                            name: 'Porcentaje Embalses',
                            type: 'area',
                            yAxis: 1,
                            color: '#2b4037',
                            lineWidth: 0,
                            fillOpacity: 0.4,
                            data: data.map(item => [item.date, item.porcentaje_util])
                        }],
                        credits: {
                            enabled: false
                        }
                    });
                } catch (e) {
                    console.error('Error al crear el gráfico 3:', e);
                }
            }

            // Cargar el archivo CSV para la gráfica 3
            fetch('data_hidrologia.csv')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('No se pudo cargar el archivo CSV');
                    }
                    return response.text();
                })
                .then(csv => {
                    try {
                        const data = parseCSV(csv);
                        if (data.length === 0) {
                            throw new Error('El archivo CSV no contiene datos válidos');
                        }
                        createChart3(data);
                    } catch (e) {
                        console.error('Error al procesar el CSV:', e);
                    }
                })
                .catch(error => {
                    console.error('Error al cargar el archivo:', error);
                });
        });
    </script>
</body>
</html>